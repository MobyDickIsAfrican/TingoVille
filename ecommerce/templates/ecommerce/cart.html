{% extends 'ecommerce/base.html' %}
{% block content %}
{% load ecommerce_extras_filters %}
<head>
<title>Cart</title>
<style>
table {
  width: 60%;
  border-top: 1px solid black;

}
tr, td, th,{
  border:none;
}

</style>
</head>
    <form id='form' method="POST" action="" enctype="multipart/form-data">
      {%csrf_token%}
      {% zip_longest formset.forms goods sizes colours as items %}
      {{formset.management_form}}
      {%for form, good, sizevar, colourvar in items %}

        <table>
      <tr> <table id="TableRow">
    <div class="nameofpro" id='{{good.Name}}'>{{good.Name}}
    <div>{{sizevar}} , {{colourvar}}</div>


<tr>
  <th>
  <ul style=" list-style:none; ">

  {%with good.images.all|first as default%}
  <li><img class="images"src="{{default.AddImage.url}}" style="width:50px; height:40px;"></li>
  {%endwith%}
  </ul>
    </th>
    <td>
     Product Description
   </td>
<td  class="Price" id='{{good.Name}}'> {{good.Price}}</td>


<tr>

<td> In stock</td>

<td></td>

 <td id='quantity'><div >Quantity:</div>
    <div id='{{good.Name}}'>{{form.quantity}}</div></td>

 </div>
 <td>
 <a href="{%url 'cart-item-delete' form.FormId.value %}"><input type="button" value="Remove" onclick="deleteRow(this)" action=""> <a>
 </td>
</tr>


</table> </tr>

<br/> <br/>
<script src="https://code.jQuery.com/jQuery-3.4.1.js"> </script>


{%endfor%}
<tr> <table>
  <th>
    Summary of orders:
    </th>


  <td id='cost'>Total:R {{cost}} </td> <td>{{form.quantity}}</td>
<td>

 <a href="#"><input type="button" value="Reset Cart" onclick="deleteRow(this)" action=""> <a></td>  </tr>
<tr> </table> <!-- DELETE ALL-->

  <tr>
<button type="submit" class="btn btn-primary">Proceed to checkout</button>
</tr>





  </form>

  <script>
  $("#nameofpro").on("change", function(e){
    console.log(2);
    var quantityid=e.target.id;
    var parentNodeId=e.target.parentNode.id;
    var price;
    var quantity;
    $(".Price").ready(function(){
     price=document.getElementById(parentNodeId).value;
    });
    quantity=document.getElementById(quantityid).value;
    var total=price*quantity;
    document.getElementById('cost').innerHTML=total;
    console.log(quantity);


  });


    </script>


{% endblock %}
