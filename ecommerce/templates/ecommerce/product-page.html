{% extends 'ecommerce/base.html' %}
{% load javascript_settings_tags %}
{% load crispy_forms_tags %}
{% block content %}
<head>

    <title>Product Description</title>
{{var1}}
<style>

  .mydiv div{
    display:inline-block;
    width:500px;
    min-height:50px;
    height:auto;
    margin-top:0px;
  }
  .desc {
        margin-top: 65px;
        font-family: 'Monserrat';
        background-color: #D0DFDF;
        color: black;
        text-align: left;
    }

  .BUTTON_YZG {
     -webkit-border-radius: 12px;
     -moz-border-radius: 12px;
     border-radius: 12px;
     height: 8px;
     line-height: 8px;
     color: #99C624;
     font-family: Arial;
     width: 161px;
     font-size: 17px;
     font-weight: 600;
     padding-top: 18px;
     padding-bottom: 18px;
     padding-left:18px;
     padding-right:18px;
     background-color: white;
     text-shadow: -16px -61px 51px #000000;
     border: solid #99C624 1px;
     text-decoration: none;
     display: inline-block;
     cursor: pointer;
  }

  .BUTTON_YZG:hover {
     background: #39393B;
     text-decoration: none;
  }

  </style>



</head>
<div  class="container">
<table>
<tr>
<div class="mydiv">
<div>
{%with item.images.all|first as default%}
<img src="{{default.AddImage.url}}"id='IneverChange' class="img-responsive img-circle" style="width:200px;height:200px;margin-top:-550px;margin-bottom:-150px;">
{%endwith%}
</div>
<div>
<div><h4 class="pro" style="margin-top:-18px; margin-bottom:0px;">{{item.Name}}</h4></div>
<hr style="margin-top:0px; margin-bottom:5px;" />
<h6>Colour:</h6>
{%for x in item.images.all%}
<img src="{{x.AddImage.url}}" id='{{x.id}}' class="img-responsive" style="width:50px;height:50px;margin-top:3px;margin-left:1px;margin-bottom:7px;">
{%endfor%}
<h6 style="margin-bottom:2px;">Price:</h6>
<div style="margin-top:7px;"><p>R {{item.Price}}</p></div>
<form class="form-horizontal" method="POST" action="" enctype="multipart/form-data">
{% csrf_token %}
<p>{{QuantityForm}}</p>
{{variable}}
<div style="margin-top:5px;"><h4><small>DESCRIPTION:</small></h4>
<p>{{Description}}</p>



</div>

<button  style="margin-top:-650px;"type="submit" class="BUTTON_YZG" value="" >Add to Basket</button>
</form>



</div>
</div>
</tr>
</table>



















<script type="text/javascript">{% javascript_settings %}</script>
<script type="text/javascript">
var id=[];
{%for x in item.images.all%}
var y='{{x.id}}';
id.push(y);
{%endfor%}
var dv = '{{ProductSize|safe}}';
console.log(dv);
var p;
$(this).on("click",function(){
  var target=event.target;
  var x=target.id;
$(document).ready(function(){
$.ajax({
url: configuration['ecommerce']['ajax_view'],
cache: false,
type: "GET",
success: function(data){
p=data;
var thing=JSON.parse(p);
console.log(thing.var1);
console.log(x);
var t=thing.var1;
$(document).ready(function(){
$.ajax({
url: configuration['ecommerce']['ajax_view'],
cache: false,
type: "POST",
data: {'id': x, 'var1':t},
success: function (data) {
console.log('success');
},
beforeSend: function(xhr, settings){
xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken'));
            }
               });
           });



         }

                 });
            });
      });

     /*if(p !== null){
       $(document).ready(function(){
           $.ajax({
        url: configuration['ecommerce']['ajax_cart'],
        cache: false,
        type: "POST",
        data: {"id": x, "var1":p[0].var1}
        success: function(data){
         console.log('success');
         console.log(p);
        }
        beforeSend: function(xhr, settings){
            xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken'));
        }
           });
       });



     }*/


        /* $(document).on("click", ".img-responsive", function() {
             x= $(this).attr("id");
             var myImgSrc = document.getElementById(x).src;
             document.getElementById('IneverChange').src = myImgSrc;
         });

         var p;
         $("btn").on("click",function(){
           $(document).ready(function(){
               $.ajax({
           	url: 'ajax/',
           	cache: false,
           	type: "GET",
           	success: function(data){
               p=data;
           	}
                    });
               });
         });
          console.log(p);
         if(p !== null){
           $(document).ready(function(){
               $.ajax({
           	url: 'ajax/',
           	cache: false,
           	type: "POST",
           	data: {"id": x, "var1":p[0].var1}
           	success: function(data){
             console.log(success);
            }
           	beforeSend: function(xhr, settings){
           	    xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken'));
           	}
               });
           });



         }
*/



     /*var EmptyDiv =document.getElementById("Empty");
     var btn =document.getElementById("btn");
     btn.addEventListener("click",function(){
       var NewRequest=new XMLHttpRequest();
       NewRequest.open('GET', 'http://localhost:8000/my-cart/');
       NewRequest.onload=function(){
         var NewData=JSON.parse(NewRequest.responseText);
         renderHTML(NewData);
       };
       NewRequest.send();
     });

     function renderHTML(data){
       EmptyDiv.insertAdjacentHTML('beforeend', 'string to add');
     }*/





</script>

<script type=text/javascript>
  var y='IneverChange';
$(document).on("click", ".img-responsive", function() {
var x= $(this).attr("id");
var myImgSrc = document.getElementById(x).src;
document.getElementById(y).src = myImgSrc;
document.getElementById(y).id=x;
y=x;
      });



</script>


{%endblock%}
